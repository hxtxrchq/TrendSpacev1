(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[37],{523:(e,a,s)=>{Promise.resolve().then(s.bind(s,4050))},4050:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>C});var l=s(5155),t=s(2115),r=s(8482),i=s(7168),n=s(5784),c=s(7550),o=s(9946);let d=(0,o.A)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),h=(0,o.A)("ZoomOut",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),x=(0,o.A)("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),m=(0,o.A)("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);var u=s(6516),p=s(6874),g=s.n(p),j=s(6766),b=s(9840),v=s(9852),y=s(2714),N=s(9474);let f=["Verano 2024","Vintage Collection","Urban Style","Minimalist"];function w(e){let{isOpen:a,onClose:s,designImage:r,garmentType:c,designPosition:o={x:50,y:50},designSize:d=100,designRotation:h=0}=e,[x,m]=(0,t.useState)(!1),[u,p]=(0,t.useState)(null),[g,w]=(0,t.useState)(!1),k=(0,t.useRef)(null),[C,S]=(0,t.useState)({name:"",description:"",price:"",collection:"",goal:"400"});(0,t.useEffect)(()=>{a&&r&&c&&P()},[a,r,c,o,d,h]);let P=async()=>{if(!k.current||!r)return;w(!0);let e=k.current,a=e.getContext("2d");if(!a){w(!1);return}e.width=400,e.height=500;try{let s="";"Hoodie"===c?s="https://hebbkx1anhila5yf.public.blob.vercel-storage.com/hoodie-XzL7Q4U6SS7QAdRxHn6MmFzgYKc3Or.png":"Polo"===c?s="https://hebbkx1anhila5yf.public.blob.vercel-storage.com/polo-gaZ4jZrxv1OcXU3xjZuAotlkYiQeNb.png":"Pant"===c&&(s="https://hebbkx1anhila5yf.public.blob.vercel-storage.com/pant%20mockup.jpg-gf67ARCdItlFS0mEZClgeol43zyw1L.png"),await new Promise((l,t)=>{let i=new j.default;i.crossOrigin="anonymous",i.onload=s=>{try{a.drawImage(i,0,0,e.width,e.height);let s=new j.default;s.crossOrigin="anonymous",s.onload=r=>{try{let t=120*d/100,r=120*d/100,i=e.width*o.x/100-t/2,n=e.height*o.y/100-r/2;a.save(),a.translate(i+t/2,n+r/2),a.rotate(h*Math.PI/180),a.globalAlpha=.9,a.drawImage(s,-t/2,-r/2,t,r),a.restore();let c=e.toDataURL("image/png");p(c),l()}catch(e){console.error("Error drawing design:",e),t(e)}},s.onerror=e=>{console.error("Failed to load design image:",e),t(Error("Failed to load design image"))},s.src=r}catch(e){console.error("Error drawing garment:",e),t(e)}},i.onerror=e=>{console.error("Failed to load garment image:",e),t(Error("Failed to load garment image"))},i.src=s})}catch(e){console.error("Error generando imagen compuesta:",e),p(r)}finally{w(!1)}},M=async e=>{if(e.preventDefault(),g){alert("Por favor espera mientras se genera la vista previa");return}if(!u&&r)try{await P()}catch(e){console.error("Error al generar imagen:",e),alert("No se pudo generar la vista previa. Por favor intenta de nuevo.");return}if(!u){alert("No se pudo generar la vista previa. Por favor intenta de nuevo.");return}let a=JSON.parse(localStorage.getItem("trendspace-user-designs")||"[]"),l=[{id:Date.now(),image:u,title:C.name,likes:0,comments:0,goal:Number.parseInt(C.goal),price:Number.parseInt(C.price),designer:"Usuario Actual",description:C.description||"Dise\xf1o \xfanico creado por la comunidad de TrendSpace",hasReachedGoal:!1,reservations:0,collection:C.collection||"Nueva Colecci\xf3n"},...a];localStorage.setItem("trendspace-user-designs",JSON.stringify(l)),m(!0),setTimeout(()=>{m(!1),s(),window.location.href="/explore"},3e3)},A=(e,a)=>{S(s=>({...s,[e]:a}))};return x?(0,l.jsx)(b.lG,{open:a,onOpenChange:s,children:(0,l.jsx)(b.Cf,{className:"max-w-md text-center",children:(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsx)("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto",children:(0,l.jsx)("div",{className:"w-8 h-8 bg-green-500 rounded-full flex items-center justify-center",children:(0,l.jsx)("span",{className:"text-white text-xl",children:"âœ“"})})}),(0,l.jsx)("h2",{className:"text-xl font-bold",children:"\xa1Dise\xf1o Subido Correctamente!"}),(0,l.jsx)("p",{className:"text-gray-600",children:"Tu dise\xf1o ha sido publicado en TrendSpace y ya est\xe1 disponible para que la comunidad lo descubra."}),(0,l.jsx)(i.$,{onClick:s,className:"bg-[#905ce6] hover:bg-[#3c2269] text-white",children:"Continuar"})]})})}):(0,l.jsx)(b.lG,{open:a,onOpenChange:s,children:(0,l.jsxs)(b.Cf,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[(0,l.jsx)(b.c7,{children:(0,l.jsx)(b.L3,{className:"text-xl font-bold text-center",children:"Compartir Modelo"})}),(0,l.jsx)("canvas",{ref:k,style:{display:"none"}}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsx)("h3",{className:"text-lg font-semibold",children:"Vista Previa"}),(0,l.jsx)("div",{className:"bg-gray-50 rounded-lg p-6 flex items-center justify-center min-h-[400px]",children:g?(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)("p",{className:"text-gray-500 mb-2",children:"Generando vista previa..."}),(0,l.jsx)("div",{className:"w-8 h-8 border-4 border-t-[#905ce6] border-r-transparent border-b-transparent border-l-transparent rounded-full animate-spin mx-auto"})]}):r?(0,l.jsxs)("div",{className:"relative",children:["Hoodie"===c&&(0,l.jsx)(j.default,{src:"https://hebbkx1anhila5yf.public.blob.vercel-storage.com/hoodie-XzL7Q4U6SS7QAdRxHn6MmFzgYKc3Or.png",alt:"Hoodie base",width:300,height:400,className:"w-64 h-auto"}),"Polo"===c&&(0,l.jsx)(j.default,{src:"https://hebbkx1anhila5yf.public.blob.vercel-storage.com/polo-gaZ4jZrxv1OcXU3xjZuAotlkYiQeNb.png",alt:"Polo base",width:300,height:400,className:"w-64 h-auto"}),"Pant"===c&&(0,l.jsx)(j.default,{src:"https://hebbkx1anhila5yf.public.blob.vercel-storage.com/pant%20mockup.jpg-gf67ARCdItlFS0mEZClgeol43zyw1L.png",alt:"Pant base",width:300,height:400,className:"w-64 h-auto"}),(0,l.jsx)("div",{className:"absolute",style:{top:"".concat(o.y,"%"),left:"".concat(o.x,"%"),transform:"translate(-50%, -50%) scale(".concat(d/100,") rotate(").concat(h,"deg)")},children:(0,l.jsx)(j.default,{src:r||"/placeholder.svg",alt:"Dise\xf1o aplicado",width:120,height:120,className:"w-28 h-28 object-contain opacity-90",style:{filter:"drop-shadow(0 2px 8px rgba(0,0,0,0.3))"}})})]}):(0,l.jsx)("p",{className:"text-gray-500",children:"Vista previa del dise\xf1o"})})]}),(0,l.jsx)("div",{className:"space-y-6",children:(0,l.jsxs)("form",{onSubmit:M,className:"space-y-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)(y.J,{htmlFor:"name",children:"Nombre del Modelo"}),(0,l.jsx)(v.p,{id:"name",value:C.name,onChange:e=>A("name",e.target.value),placeholder:"Ej: Cherry Vintage Tee",required:!0})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)(y.J,{htmlFor:"description",children:"Descripci\xf3n"}),(0,l.jsx)(N.T,{id:"description",value:C.description,onChange:e=>A("description",e.target.value),placeholder:"Describe tu dise\xf1o...",rows:3})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)(y.J,{htmlFor:"price",children:"Precio Aproximado (S/)"}),(0,l.jsx)(v.p,{id:"price",type:"number",value:C.price,onChange:e=>A("price",e.target.value),placeholder:"120",required:!0})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)(y.J,{htmlFor:"goal",children:"Meta de Me Gusta"}),(0,l.jsx)(v.p,{id:"goal",type:"number",value:C.goal,onChange:e=>A("goal",e.target.value),placeholder:"400",disabled:!0}),(0,l.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Meta autom\xe1tica basada en el tipo de prenda"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)(y.J,{htmlFor:"collection",children:"Colecci\xf3n"}),(0,l.jsxs)(n.l6,{onValueChange:e=>A("collection",e),children:[(0,l.jsx)(n.bq,{children:(0,l.jsx)(n.yv,{placeholder:"Selecciona una colecci\xf3n"})}),(0,l.jsxs)(n.gC,{children:[f.map(e=>(0,l.jsx)(n.eb,{value:e,children:e},e)),(0,l.jsx)(n.eb,{value:"new",children:"+ Nueva Colecci\xf3n"})]})]})]}),(0,l.jsxs)("div",{className:"flex space-x-3 pt-6",children:[(0,l.jsx)(i.$,{type:"button",variant:"outline",onClick:s,className:"flex-1",children:"Cancelar"}),(0,l.jsx)(i.$,{type:"submit",className:"flex-1 bg-[#905ce6] hover:bg-[#3c2269] text-white",disabled:g,children:g?"Generando...":"Publicar Dise\xf1o"})]})]})})]})]})})}var k=s(2226);function C(){let[e,a]=(0,t.useState)("polo"),[s,o]=(0,t.useState)(null),[p,b]=(0,t.useState)(!1),[v,y]=(0,t.useState)({x:50,y:50}),[N,f]=(0,t.useState)(100),[C,S]=(0,t.useState)(0),P=(0,t.useRef)(null),M=k.GP.find(a=>a.id===e);return(0,l.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-[#3c2269] via-[#482880] to-[#27164e]",children:[(0,l.jsxs)("header",{className:"p-6 flex justify-between items-center",children:[(0,l.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,l.jsx)(g(),{href:"/explore",className:"text-white hover:text-[#905ce6] transition-colors",children:(0,l.jsx)(c.A,{className:"w-6 h-6"})}),(0,l.jsx)(g(),{href:"/explore",className:"text-white text-2xl font-bold hover:text-[#905ce6] transition-colors",children:"TrendSpace"})]}),(0,l.jsx)("h1",{className:"text-white text-xl font-semibold",children:"Dise\xf1a tu modelo"})]}),(0,l.jsx)("main",{className:"px-6 pb-12",children:(0,l.jsx)("div",{className:"max-w-7xl mx-auto",children:(0,l.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsx)(r.Zp,{className:"bg-white/95 backdrop-blur-sm",children:(0,l.jsxs)(r.Wu,{className:"p-4",children:[(0,l.jsx)("h3",{className:"text-sm font-semibold mb-3",children:"Tipo de Prenda"}),(0,l.jsxs)(n.l6,{value:e,onValueChange:a,children:[(0,l.jsx)(n.bq,{className:"h-8 text-sm",children:(0,l.jsx)(n.yv,{})}),(0,l.jsx)(n.gC,{children:k.GP.map(e=>(0,l.jsx)(n.eb,{value:e.id,children:e.name},e.id))})]})]})}),(0,l.jsx)(r.Zp,{className:"bg-white/95 backdrop-blur-sm",children:(0,l.jsxs)(r.Wu,{className:"p-4",children:[(0,l.jsx)("h3",{className:"text-sm font-semibold mb-3",children:"Subir Dise\xf1o"}),(0,l.jsx)(i.$,{onClick:()=>{var e;return null===(e=P.current)||void 0===e?void 0:e.click()},variant:"outline",className:"w-full h-20 border-dashed border-2 border-gray-300 hover:border-[#905ce6] transition-colors",size:"sm",children:(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)(d,{className:"w-5 h-5 mx-auto mb-1 text-gray-400"}),(0,l.jsx)("p",{className:"text-xs text-gray-600",children:"Subir dise\xf1o"})]})}),(0,l.jsx)("input",{ref:P,type:"file",accept:"image/*",onChange:e=>{var a;let s=null===(a=e.target.files)||void 0===a?void 0:a[0];if(s){let e=new FileReader;e.onload=e=>{var a;o(null===(a=e.target)||void 0===a?void 0:a.result)},e.readAsDataURL(s)}},className:"hidden"})]})}),s&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(r.Zp,{className:"bg-white/95 backdrop-blur-sm",children:(0,l.jsxs)(r.Wu,{className:"p-4",children:[(0,l.jsx)("h3",{className:"text-sm font-semibold mb-3",children:"Controles"}),(0,l.jsxs)("div",{className:"space-y-3",children:[(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsx)(i.$,{size:"sm",variant:"outline",onClick:()=>f(Math.max(50,N-10)),children:(0,l.jsx)(h,{className:"w-3 h-3"})}),(0,l.jsxs)("span",{className:"text-xs flex-1 text-center",children:[N,"%"]}),(0,l.jsx)(i.$,{size:"sm",variant:"outline",onClick:()=>f(Math.min(150,N+10)),children:(0,l.jsx)(x,{className:"w-3 h-3"})})]}),(0,l.jsxs)(i.$,{size:"sm",variant:"outline",onClick:()=>{y({x:50,y:50}),f(100),S(0)},className:"w-full",children:[(0,l.jsx)(m,{className:"w-3 h-3 mr-1"}),"Reset"]})]})]})}),(0,l.jsx)(r.Zp,{className:"bg-white/95 backdrop-blur-sm",children:(0,l.jsxs)(r.Wu,{className:"p-4",children:[(0,l.jsx)("h3",{className:"text-sm font-semibold mb-3",children:"Vista Previa"}),(0,l.jsx)(j.default,{src:s||"/placeholder.svg",alt:"Dise\xf1o subido",width:120,height:120,className:"w-full h-20 object-contain border rounded-lg"})]})})]})]}),(0,l.jsx)("div",{className:"lg:col-span-3",children:(0,l.jsx)(r.Zp,{className:"bg-white/95 backdrop-blur-sm h-full",children:(0,l.jsxs)(r.Wu,{className:"p-6 h-full",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,l.jsx)("h3",{className:"text-lg font-semibold",children:"Vista Previa del Dise\xf1o"}),s&&(0,l.jsxs)(i.$,{onClick:()=>{b(!0)},className:"bg-[#905ce6] hover:bg-[#3c2269] text-white",children:[(0,l.jsx)(u.A,{className:"w-4 h-4 mr-2"}),"Share"]})]}),(0,l.jsx)("div",{className:"relative bg-gray-900 rounded-lg p-8 min-h-[600px] flex items-center justify-center",children:(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)(j.default,{src:(null==M?void 0:M.image)||"/placeholder.svg?height=500&width=400",alt:(null==M?void 0:M.name)||"Prenda",width:400,height:500,className:"w-96 h-auto"}),s&&(0,l.jsx)("div",{className:"absolute cursor-move",style:{top:"".concat(v.y,"%"),left:"".concat(v.x,"%"),transform:"translate(-50%, -50%) scale(".concat(N/100,") rotate(").concat(C,"deg)")},onMouseDown:e=>{let a=e.clientX,s=e.clientY,l=v.x,t=v.y,r=e=>{y({x:Math.max(20,Math.min(80,l+(e.clientX-a)/4)),y:Math.max(20,Math.min(80,t+(e.clientY-s)/4))})},i=()=>{document.removeEventListener("mousemove",r),document.removeEventListener("mouseup",i)};document.addEventListener("mousemove",r),document.addEventListener("mouseup",i)},children:(0,l.jsx)(j.default,{src:s||"/placeholder.svg",alt:"Dise\xf1o aplicado",width:120,height:120,className:"w-32 h-32 object-contain opacity-90 select-none",style:{filter:"drop-shadow(0 2px 8px rgba(0,0,0,0.3))"}})})]})}),!s&&(0,l.jsx)("div",{className:"text-center mt-8",children:(0,l.jsx)("p",{className:"text-gray-500",children:"Sube un dise\xf1o para ver la vista previa en la prenda seleccionada"})})]})})})]})})}),(0,l.jsx)(w,{isOpen:p,onClose:()=>b(!1),designImage:s,garmentType:(null==M?void 0:M.name)||"",designPosition:v,designSize:N,designRotation:C})]})}},6516:(e,a,s)=>{"use strict";s.d(a,{A:()=>l});let l=(0,s(9946).A)("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]])}},e=>{var a=a=>e(e.s=a);e.O(0,[992,471,531,881,441,684,358],()=>a(523)),_N_E=e.O()}]);